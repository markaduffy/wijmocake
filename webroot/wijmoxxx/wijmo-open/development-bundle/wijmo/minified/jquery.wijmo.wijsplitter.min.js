/*
 *
 * Wijmo Library 1.4.1
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
(function(a){"use strict";var f="wijmo-wijsplitter-",w=f+"wrapper",q=f+"horizontal",r=f+"vertical",b=f+"h-",c=f+"v-",o="-content",l="panel1",m="panel2",h=l+o,u=m+o,y="bar",v="expander",t="ui-widget-header",i="ui-widget-content",s="ui-state-default",e="ui-state-hover",n="ui-state-active",d="ui-corner-",x="ui-icon",g="ui-icon-triangle-1-",j="collapsed",k="expanded",p="resize-helper";a.widget("wijmo.wijsplitter",{options:{sizing:null,sized:null,expand:null,collapse:null,expanded:null,collapsed:null,barZIndex:-1,showExpander:true,splitterDistance:100,orientation:"vertical",fullSplit:false,resizeSettings:{animationOptions:{duration:100,easing:"swing",disabled:false},ghost:false},panel1:{minSize:1,collapsed:false,scrollBars:"auto"},panel2:{minSize:1,collapsed:false,scrollBars:"auto"}},_setOption:function(c,d){var b=this,e=b.options,f=a.extend({},e[c]);if(c==="fullSplit")b._setFullSplit(d);else if(a.isPlainObject(e[c])){if(c==="panel1"&&d.collapsed!==undefined)b._setPanel1Collapsed(d.collapsed);else c==="panel2"&&d.collapsed!==undefined&&b._setPanel2Collapsed(d.collapsed);e[c]=a.extend(true,e[c],d);return}a.Widget.prototype._setOption.apply(b,arguments);if(f!==d)if(c==="orientation")b.refresh();else if(c==="fullSplit")b.refresh(true,false);else if(c==="splitterDistance"){b.refresh(false,false);b._trigger("sized")}c==="disabled"&&b._handleDisabledOption(d,b.element)},_create:function(){var a=this,b=a.element,c=a.options;a._fields={width:b.width(),height:b.height()};b.data("fields",a._fields);c.fullSplit&&a._setFullSplit(true);a._splitterify();a._updateElementsCss();a._updateElements();a._bindEvents();a._initResizer();c.disabled&&a.disable();a._trigger("load",null,a)},_handleDisabledOption:function(b,c){var a=this;if(b){if(!a.disabledDiv)a.disabledDiv=a._createDisabledDiv(c);a.disabledDiv.appendTo("body")}else if(a.disabledDiv){a.disabledDiv.remove();a.disabledDiv=null}},_createDisabledDiv:function(d){var g=this,b=d?d:g.element,c=b.offset(),f=b.outerWidth(),e=b.outerHeight();return a("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:f,height:e,left:c.left,top:c.top})},destroy:function(){var b=this,e=b.element,c=b._fields,i=c.expander,j=c.bar,f=c.panel1,h=c.originalContent,g=c.originalStyle,d=b.widgetName;f&&f.is(":ui-resizable")&&f.resizable("destroy");f.unbind("."+d);i.unbind("."+d);j.unbind("."+d);a(window).unbind("."+d);e.html(h);e.removeAttr("class");if(g===undefined)e.removeAttr("style");else e.attr("style",g);if(b.disabledDiv){b.disabledDiv.remove();b.disabledDiv=null}},refresh:function(e,d){var a=this,c=a._fields,b=c.panel1;if(c._isResizing)return;(d||d===undefined)&&a._updateElementsCss();a._updateElements();if(e||e===undefined){b&&b.is(":ui-resizable")&&b.resizable("destroy");a._initResizer()}},_splitterify:function(){var k=this,e=k.element,m=k.options,b=k._fields,f,i,j,c,d,g,h,l;c=e.find(">div:eq(0)");d=e.find(">div:eq(1)");b.originalStyle=e.attr("style");b.originalContent=e.html();f=a("<div></div>").appendTo(e);i=a("<div></div>").appendTo(f);if(c.length===0)c=a("<div></div>");c.appendTo(i);g=a("<div></div>").appendTo(f);m.barZIndex!==-1&&g.css("z-index",m.barZIndex);h=a("<div></div>").appendTo(g).attr("role","button");l=a("<span></span>").appendTo(h);j=a("<div></div>").appendTo(f);if(d.length===0)d=a("<div></div>");d.appendTo(j);b.wrapper=f;b.panel1=i;b.pnl1Content=c;b.panel2=j;b.pnl2Content=d;b.bar=g;b.expander=h;b.icon=l},_updateElementsCss:function(){var f=this,o=f.element,D=f.options,a=D.orientation==="vertical",e=f._fields,p=e.wrapper,A=e.panel1,B=e.panel2,j=e.pnl1Content,k=e.pnl2Content,C=e.bar,n=e.expander,z=e.icon;o.removeClass(r+" "+q).addClass(a?r:q);p.attr("class",w);A.removeClass(c+l+" "+b+l).addClass((a?c:b)+l);j.removeClass(c+h+" "+b+h+" "+i).addClass((a?c:b)+h+" "+i);C.attr("class",(a?c:b)+y+" "+t).css("width","").css("height","");n.attr("class",d+(a?"bl "+c:"tr "+b)+v+" "+s).css("left","").css("top","");z.attr("class",x+" "+g+(a?"w":"n"));B.removeClass(c+m+" "+b+m).addClass((a?c:b)+m);k.removeClass(c+h+" "+b+h+" "+i).addClass((a?c:b)+u+" "+i);f._updateExpanderCss()},_updateExpanderCss:function(){var i=this,s=i.options,t=i.element,r=i._fields,f=r.expander,h=r.icon,a=s.orientation==="vertical",e=a?c:b,l=a?"tr":"bl",m="br",p=a?"e":"s",n=a?"bl":"tr",o="tl",q=a?"w":"n";f.removeClass(e+k+" "+e+j+" "+d+l+" "+d+m+" "+d+n+" "+d+o);h.removeClass(g+p+" "+g+q);if(s.panel1.collapsed){f.addClass(d+l+" "+d+m+" "+e+j);h.addClass(g+p)}else{f.addClass(d+n+" "+d+o+" "+e+k);h.addClass(g+q)}},_updateElements:function(){var n=this,r=n.element,f=n.options,a=f.splitterDistance,h=n._fields,s=h.wrapper,l=h.panel1,p=h.pnl1Content,t=h.panel2,q=h.pnl2Content,o=h.bar,e=h.expander,g=r.width(),d=r.height(),m,i;s.height(d);n._setPanelsScrollMode();if(f.orientation==="vertical"){m=o.outerWidth(true);if(a>g-m)a=g-m;s.width(g*2);if(f.panel2.collapsed&&!f.panel1.collapsed)a=g-m;if(f.panel1.collapsed){e.addClass(c+j);l.css("display","none");a=0}else{e.addClass(c+k);l.css("display","")}l.height(d).width(a);p.outerHeight(d,true);o.outerHeight(d,true);t.height(d).width(g-a-m);q.outerHeight(d,true);e.css("cursor","pointer").css("top",d/2-e.outerHeight(true)/2)}else{i=o.outerHeight(true);if(a>d-i)a=d-i;if(f.panel2.collapsed&&!f.panel1.collapsed)a=d-i;p.outerHeight(a,true);if(f.panel1.collapsed){e.addClass(b+j);l.css("display","none");a=0}else{e.addClass(b+k);l.css("display","")}q.outerHeight(d-a-i,true);l.width(g).height(a);t.width(g).height(d-a-i);e.css("cursor","pointer").css("left",g/2-e.outerWidth(true)/2)}e.css("display",f.showExpander?"":"none")},_setFullSplit:function(b){var c=this,a=c._fields,e=b?"100%":a.width,d=b?"100%":a.height;c.element.css("width",e).css("height",d)},_setPanel1Collapsed:function(c,f){var b=this,d=b.options,e=d.panel1.collapsed;if(e===c)return;if(!b._trigger(e?"expand":"collapse",f,null))return;d.panel1.collapsed=c;if(c)d.panel2.collapsed=false;else a(".ui-resizable-handle",b.element).show();b._updateElements();b._updateExpanderCss();b._trigger(c?"collapsed":"expanded",f,null)},_setPanel2Collapsed:function(b){var c=this,d=c.options,f=d.panel2.collapsed,e=a(".ui-resizable-handle",c.element);if(f===b)return;d.panel2.collapsed=b;if(b){d.panel1.collapsed=false;e.hide()}else e.show();c._updateElements()},_bindEvents:function(){var c=this,b=c.options,h=c._fields,g=h.bar,f=h.expander,i=h.panel1,d=c.widgetName;f.bind("mouseover."+d,function(){if(b.disabled)return;f.addClass(e)}).bind("mouseout."+d,function(){if(b.disabled)return;f.removeClass(e).removeClass(n)}).bind("mousedown."+d,function(){if(b.disabled)return;f.addClass(n)}).bind("mouseup."+d,function(a){if(b.disabled)return;f.removeClass(n);if(b.panel2.collapsed){c._setPanel2Collapsed(!b.panel2.collapsed);return}c._setPanel1Collapsed(!b.panel1.collapsed,a)});g.bind("mouseover."+d,function(){if(b.disabled)return;g.addClass(e)}).bind("mouseout."+d,function(){if(b.disabled)return;g.removeClass(e)});i.bind("animating."+d,function(a){if(b.disabled)return;c._adjustLayout(c);c._trigger("sizing",a,null)}).bind("animated."+d,function(a){if(b.disabled)return;c._adjustLayout(c);c._trigger("sized",a,null)});a(".ui-resizable-handle",c.element).live("mouseover."+d,function(){if(b.disabled)return;g.addClass(e)}).live("mouseout."+d,function(){if(b.disabled)return;g.removeClass(e)});a(window).bind("resize."+d,function(){if(b.disabled)return;if(b.fullSplit){c._updateElements();c._initResizer()}})},_initResizer:function(){var l=this,h=l.element,d=l.options,e=l._fields,t=e.bar,n=e.panel1,k=d.resizeSettings,g=k.animationOptions,m=g.disabled?0:g.duration,v=h.width(),u=h.height(),q,s,j,o,r,i,f;if(d.orientation==="vertical"){q=t.outerWidth(true);s=v-q-d.panel2.minSize;j=d.panel1.minSize;if(j<2)j=2;n.resizable({wijanimate:true,minWidth:j,maxWidth:s,handles:"e",helper:c+p,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}else{o=t.outerHeight(true);r=u-o-d.panel2.minSize;i=d.panel1.minSize;if(i<2)i=2;n.resizable({wijanimate:true,minHeight:i,maxHeight:r,handles:"s",helper:b+p,animateDuration:m,animateEasing:g.easing,ghost:k.ghost,start:function(){e._isResizing=true},stop:function(){e._isResizing=false}})}f=a(".ui-resizable-handle",h);if(d.panel2.collapsed)f.hide();else f.show();if(a.browser.msie&&a.browser.version<7)d.orientation==="vertical"&&f.height(h.height())},_adjustLayout:function(a){var b=a.options,e=a._fields,d=e.panel1,c=b.orientation==="vertical"?d.width():d.height();if(b.splitterDistance===c)return;b.splitterDistance=c;a._updateElements()},_setPanelsScrollMode:function(){var d=this,c=d._fields,e=d.options,b=[e.panel1.scrollBars,e.panel2.scrollBars];a.each([c.pnl1Content,c.pnl2Content],function(c,a){if(b[c]==="auto")a.css("overflow","auto");else if(b[c]==="both")a.css("overflow","scroll");else if(b[c]==="none")a.css("overflow","hidden");else if(b[c]==="horizontal")a.css("overflow-x","scroll").css("overflow-y","hidden");else b[c]==="vertical"&&a.css("overflow-x","hidden").css("overflow-y","scroll")})}})})(jQuery);(function(a){"use strict";a.ui.plugin.add("resizable","wijanimate",{stop:function(l){var b=a(this).data("resizable"),i=b.options,c=b.element,d=b._proportionallyResizeElements,h=d.length&&/textarea/i.test(d[0].nodeName),j=h&&a.ui.hasScroll(d[0],"left")?0:b.sizeDiff.height,k=h?0:b.sizeDiff.width,g,e,f;c.css("width",b.originalSize.width).css("height",b.originalSize.height);g={width:b.size.width-k,height:b.size.height-j};e=parseInt(c.css("left"),10)+(b.position.left-b.originalPosition.left)||null;f=parseInt(c.css("top"),10)+(b.position.top-b.originalPosition.top)||null;c.animate(a.extend(g,f&&e?{top:f,left:e}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var e={width:parseInt(c.css("width"),10),height:parseInt(c.css("height"),10),top:parseInt(c.css("top"),10),left:parseInt(c.css("left"),10)};d&&d.length&&a(d[0]).css({width:e.width,height:e.height});b._updateCache(e);b._propagate("resize",l);c.trigger("animating")},complete:function(){c.trigger("animated")}})}})})(jQuery);